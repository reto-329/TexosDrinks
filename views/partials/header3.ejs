<link rel="stylesheet" href="/css/header3.css">
<header class="header" id="header">
    <div class="container">
        <div class="header-content">
            <a href="/admin/dashboard" class="logo">
                <img src="/Images/logo1.png" alt="Texos Drinks Logo" class="logo-img">
                <span class="logo-text">
                    <span class="logo-accent1">TEXOS</span>
                    <span class="logo-accent2">DRINKS</span>
                    <span class="admin-badge">Admin</span>
                </span>
            </a>

            <div class="header-actions">
                <% if (admin && admin.username) { %>
                    <div class="user-dropdown">
                        <button class="user-dropdown-btn" tabindex="0">
                            <span>Welcome, ADMIN <%= admin.username %></span>
                            <i class="fas fa-caret-down" aria-hidden="true"></i>
                        </button>
                        <div class="user-dropdown-content">
                            <a href="/admin/dashboard"><i class="fas fa-user-shield"></i> Dashboard</a>
                            <a href="/admin/settings"><i class="fas fa-cog"></i> Settings</a>
                            <a href="#" onclick="logoutAdmin()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                <% } %>
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle mobile menu">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <% if (admin && admin.username) { %>
        <nav class="nav-mobile" id="mobileNav">
            <div class="mobile-welcome">
                <i class="fas fa-user-circle"></i> <span>Welcome, ADMIN <%= admin.username %></span>
            </div>
            <a href="/admin/dashboard" class="nav-link"><i class="fas fa-user-shield"></i> Dashboard</a>
            <a href="/admin/settings" class="nav-link"><i class="fas fa-cog"></i> Settings</a>
            <a href="#" onclick="logoutAdmin()" class="nav-link"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </nav>
        <% } %>
    </div>
</header>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Mobile menu toggle
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileNav = document.getElementById('mobileNav');
    
    if (mobileMenuBtn && mobileNav) {
        mobileMenuBtn.addEventListener('click', function() {
            mobileNav.classList.toggle('active');
            mobileMenuBtn.classList.toggle('active');
        });
    }

    // Desktop dropdown hover
    const userDropdown = document.querySelector('.user-dropdown');
    if (userDropdown) {
        userDropdown.addEventListener('mouseenter', () => {
            if (window.innerWidth > 768) {
                userDropdown.classList.add('active');
            }
        });
        userDropdown.addEventListener('mouseleave', () => {
            if (window.innerWidth > 768) {
                userDropdown.classList.remove('active');
            }
        });
    }
});

function logoutAdmin() {
    fetch('/api/admin/logout', {
        method: 'POST',
        credentials: 'same-origin'
    })
    .then(() => {
        showLogoutNotification('/adminLogin');
    });
}

function showLogoutNotification(redirectUrl) {
    let notification = document.createElement('div');
    notification.className = 'logout-notification';
    notification.textContent = 'You have been logged out.';
    document.body.appendChild(notification);
    setTimeout(() => {
        notification.remove();
        window.location.href = redirectUrl;
    }, 2000);
}
</script>